{"version":3,"sources":["meteor://üíªapp/packages/universe:utilities/UniUtils.js","meteor://üíªapp/packages/universe:utilities/RecursiveIterator.js","meteor://üíªapp/packages/universe:utilities/deepExtend.js","meteor://üíªapp/packages/universe:utilities/deepEqual.js","meteor://üíªapp/packages/universe:utilities/UniUtilsStrings.js","meteor://üíªapp/packages/universe:utilities/UniConfig.js","meteor://üíªapp/packages/universe:utilities/UniEmitter.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAIA,WAAW;;;;;;;;;;;AAWP;AAAK,iBAAS,GAAT,CAAc,MAAd,EAAsB,GAAtB,EAA2B,KAA3B,EAAkC;AACnC,gBAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AACzB,wBAAQ,IAAR,CAAa,qBAAb;AACA,uBAAO,MAAP;AACH;;AAED,gBAAI,OAAO,IAAI,KAAJ,CAAU,GAAV,CAAX;AACA,gBAAI,OAAO,MAAX;;AAEA,mBAAO,MAAM,KAAK,KAAL,EAAb,EAA2B;AACvB,oBAAI,KAAK,GAAL,MAAc,SAAlB,EAA6B;AACzB,wBAAI,CAAC,KAAK,CAAL,CAAD,KAAa,CAAC,KAAK,CAAL,CAAlB,EAA2B;AACvB,6BAAK,GAAL,IAAY,EAAZ;AACH,qBAFD,MAEO;AACH,6BAAK,GAAL,IAAY,EAAZ;AACH;AACJ;;AAED,oBAAI,UAAU,SAAV,IAAuB,KAAK,MAAL,KAAgB,CAA3C,EAA8C;AAC1C,yBAAK,GAAL,IAAY,KAAZ;AACH;;AAED,uBAAO,KAAK,GAAL,CAAP;AACH;;AAED,mBAAO,MAAP;AACH;;AA1BD,eAAc,GAAd;AAAA,OAXO;;;;;;;;;;;;;;;;AAsDP;AAAK,iBAAS,GAAT,CAAc,MAAd,EAAsB,GAAtB,EAA2B,YAA3B,EAAyC;AAC1C,gBAAI,QAAO,MAAP,yCAAO,MAAP,OAAkB,QAAlB,IAA8B,WAAW,IAA7C,EAAmD;AAC/C,uBAAO,YAAP;AACH;;AAED,gBAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AACzB,sBAAM,IAAI,KAAJ,CAAU,qBAAV,CAAN;AACH;;AAED,gBAAI,OAAO,IAAI,KAAJ,CAAU,GAAV,CAAX;AACA,gBAAI,OAAO,KAAK,GAAL,EAAX;;AAEA,mBAAO,MAAM,KAAK,KAAL,EAAb,EAA2B;AACvB,yBAAS,OAAO,GAAP,CAAT;;AAEA,oBAAI,QAAO,MAAP,yCAAO,MAAP,OAAkB,QAAlB,IAA8B,WAAW,IAA7C,EAAmD;AAC/C,2BAAO,YAAP;AACH;AACJ;;AAED,mBAAO,UAAU,OAAO,IAAP,MAAiB,SAA3B,GAAuC,OAAO,IAAP,CAAvC,GAAsD,YAA7D;AACH;;AArBD,eAAc,GAAd;AAAA,OAtDO;;;;;;;;;AAoFP;AAAK,iBAAS,GAAT,CAAc,GAAd,EAAmB,IAAnB,EAAyB,cAAzB,EAAyC;AAC1C,gBAAI,CAAC,EAAE,QAAF,CAAW,IAAX,CAAL,EAAuB;AACnB,sBAAM,IAAI,KAAJ,CAAU,uCAAV,CAAN;AACH;AACD,gBAAI,QAAQ,KAAK,KAAL,CAAW,GAAX,CAAZ;;AAEA,gBAAI,EAAE,OAAF,CAAU,KAAV,CAAJ,EAAsB;AAClB,oBAAI,OAAO,MAAM,GAAN,EAAX;AACA,uBAAO,OAAO,MAAM,KAAN,EAAd,EAA6B;AACzB,0BAAM,IAAI,IAAJ,CAAN;AACA,wBAAI,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAf,IAA2B,QAAQ,IAAvC,EAA6C;AACzC,+BAAO,KAAP;AACH;AACJ;AACD,oBAAI,cAAJ,EAAoB;AAChB,2BAAO,EAAE,GAAF,CAAM,GAAN,EAAW,IAAX,CAAP;AACH;AACD,uBAAO,CAAC,EAAE,OAAO,IAAI,IAAJ,CAAT,CAAR;AACH,aAZD,MAYO;AACH,oBAAI,cAAJ,EAAoB;AAChB,2BAAO,EAAE,GAAF,CAAM,GAAN,EAAW,IAAX,CAAP;AACH;AACD,uBAAO,CAAC,EAAE,OAAO,IAAI,IAAJ,CAAT,CAAR;AACH;AACJ;;AAxBD,eAAc,GAAd;AAAA,OApFO;;;;;;;;AAqHP;AAAS,iBAAS,OAAT,CAAkB,GAAlB,EAAuB,MAAvB,EAA+B,OAA/B,EAAwC;AAC7C,gBAAI,MAAJ;AAAA,gBACI,aAAa,EAAE,UAAF,CAAa,MAAb,CADjB;;AAGA,cAAE,GAAF,CAAM,GAAN,EAAW,UAAU,KAAV,EAAiB,GAAjB,EAAsB;AAC7B,oBAAI,QAAQ,aAAa,OAAO,IAAP,CAAY,OAAZ,EAAqB,KAArB,EAA4B,GAA5B,EAAiC,GAAjC,CAAb,GAAsD,UAAU,MAA5E;AACA,oBAAI,KAAJ,EAAW;AACP,6BAAS,GAAT;AACA,2BAAO,IAAP;AACH;AACJ,aAND;AAOA,mBAAO,MAAP;AACH;;AAZD,eAAkB,OAAlB;AAAA,OArHO;AAkIP;AAAiB,iBAAS,eAAT,CAA0B,KAA1B,EAAiC;AAC9C,gBAAI,EAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AACnB,uBAAO,MAAM,GAAb;AACH;AACD,mBAAO,KAAP;AACH;;AALD,eAA0B,eAA1B;AAAA,OAlIO;;;;AA2IP;AAAkB,iBAAS,gBAAT,CAA2B,IAA3B,EAAiC,eAAjC,EAAkD;AAChE,gBAAI,CAAC,eAAL,EAAsB;AAClB,uBAAO,SAAS,aAAT,CAAuB,IAAvB,EAA6B,MAAM,GAAnC,CAAP;AACH;AACD,mBAAO,SAAS,aAAT,CAAuB,QAAQ,IAA/B,EAAqC,MAAM,GAA3C,CAAP;AACH;;AALD,eAA2B,gBAA3B;AAAA,OA3IO;;;;;;;AAuJP;AAAS,iBAAS,OAAT,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B;AACnC,gBAAI,OAAO,EAAX;AACA,iBAAK,IAAI,EAAT,2CAAe,IAAf,GAAqB;AACjB,oBAAI,CAAC,MAAM,MAAN,CAAa,KAAK,EAAL,CAAb,EAAuB,KAAK,EAAL,CAAvB,CAAL,EAAuC;AACnC,yBAAK,EAAL,IAAW,KAAK,EAAL,CAAX;AACH;AACJ;AACD,iBAAK,IAAI,EAAT,2CAAe,IAAf,GAAqB;AACjB,oBAAI,CAAC,KAAK,EAAL,CAAL,EAAe;AACX,yBAAK,EAAL,IAAW,KAAK,EAAL,CAAX;AACH;AACJ;AACD,mBAAO,IAAP;AACH;;AAbD,eAAkB,OAAlB;AAAA,OAvJO;;;;;;;;;AA6KP;AAAgB,iBAAS,cAAT,CAAyB,MAAzB,EAAiC,QAAjC,EAA2C,QAA3C,EAAqD;AACjE,gBAAI,kBAAkB;AAClB,qBAAK,IADa;AAElB,qBAAK,GAFa;AAGlB,qBAAK,GAHa;AAIlB,qBAAK;AAJa,aAAtB;;AAOA,uBAAW,gBAAgB,QAAhB,IAA4B,gBAAgB,QAAhB,CAA5B,GAAwD,QAAnE;AACA,uBAAW,gBAAgB,QAAhB,IAA4B,gBAAgB,QAAhB,CAA5B,GAAwD,QAAnE;;AAEA,mBAAO,OAAO,OAAP,CAAe,CAAf,EAAkB,OAAlB,CAA0B,GAA1B,EAA+B,QAA/B,EAAyC,OAAzC,CAAiD,IAAjD,EAAuD,UAAU,KAAV,EAAiB,KAAjB,EAAwB,MAAxB,EAAgC;AAC1F,oBAAI,SAAS,UAAU,QAAnB,IAAgC,CAAC,OAAO,MAAP,GAAgB,KAAjB,IAA0B,CAA1B,KAAgC,CAApE,EAAwE;AACpE,2BAAO,WAAW,KAAlB;AACH;;AAED,uBAAO,KAAP;AACH,aANM,CAAP;AAOH;;AAlBD,eAAyB,cAAzB;AAAA,OA7KO;;;;;;AAqMP;AAA6B,iBAAS,2BAAT,CAAsC,cAAtC,EAAsD;AAC/E,gBAAI,SAAS,EAAb;AACA,mBAAO,IAAP,CAAY,cAAZ,EAA4B,OAA5B,CAAoC,UAAU,EAAV,EAAc;AAC9C,oBAAI,0BAA0B,EAA1B,MAAkC,CAAtC,EAAyC;AACrC,2BAAO,IAAP,CAAY,eAAe,EAAf,CAAZ,EAAgC,OAAhC,CAAwC,UAAU,KAAV,EAAiB;AACrD,4BAAI,MAAM,OAAN,CAAc,GAAd,MAAuB,CAAC,CAA5B,EAA+B;AAC3B,oCAAQ,MAAM,SAAN,CAAgB,CAAhB,EAAmB,MAAM,OAAN,CAAc,GAAd,CAAnB,CAAR;AACH;AACD,4BAAI,CAAC,EAAE,QAAF,CAAW,MAAX,EAAmB,KAAnB,CAAL,EAAgC;AAC5B,mCAAO,IAAP,CAAY,KAAZ;AACH;AACJ,qBAPD;AAQH,iBATD,MASO;AACH,2BAAO,IAAP,CAAY,EAAZ;AACH;AACJ,aAbD;AAcA,mBAAO,MAAP;AACH;;AAjBD,eAAsC,2BAAtC;AAAA,OArMO;;;;;;;AA6NP;AAAiC,iDAAU,cAAV,EAA0B,MAA1B,EAAkC;AAC/D,qBAAS,UAAU,EAAnB;AACA,gBAAI,KAAK,cAAc,MAAd,CAAqB,MAArB,CAAT;AACA,0BAAc,MAAd,CAAqB,EAArB,EAAyB,cAAzB;AACA,gBAAI,SAAS,cAAc,OAAd,CAAsB,EAAtB,CAAb;AACA,gBAAI,OAAO,OAAO,GAAlB,EAAuB;AACnB,uBAAO,OAAO,GAAd;AACH;AACD,0BAAc,MAAd,CAAqB,EAArB;AACA,mBAAO,MAAP;AACH;;AAVD;AAAA,OA7NO;;;;AA2OP,YAAQ,OAAO,MAAP,CAAc,IAAd,CAAmB,MAAnB;AA3OD,CAAX;;;AA+OA,IAAI,4BAA4B;AAC5B,UAAM,CADsB,EACnB,MAAM,CADa,EACV,QAAQ,CADE,EACC,WAAW,CADZ,EACe,MAAM,CADrB,EACwB,UAAU,CADlC,EACqC,OAAO,CAD5C;AAE5B,cAAU,CAFkB,EAEf,OAAO,CAFQ,EAEL,MAAM;AAFD,CAAhC;;AAKA,IAAI,gBAAgB,IAAI,eAAJ,CAAoB,IAApB,CAApB,gF;;;;;;;;;;;;;;;ACvPA,IAAM,cAAc,cAApB;AACA,IAAM,kBAAkB,kBAAxB;AACA,IAAM,WAAW,WAAjB;AACA,IAAM,QAAQ,SAAd;AACA,IAAM,QAAQ,SAAd;AACA,IAAM,QAAQ,SAAd;IACO,K,GAAS,I,CAAT,K;IACA,I,GAAQ,M,CAAR,I;;;AAEP,IAAM,cAAc,EAApB;;AAGA,SAAS,iBAAT;;;;;;;;AAOI,+BAAY,IAAZ,EAAkF;AAAA,YAAhE,UAAgE,yDAAnD,UAAmD;AAAA,YAAvC,cAAuC,yDAAtB,KAAsB;AAAA,YAAf,OAAe,yDAAL,GAAK;;AAAA;;AAC9E,aAAK,WAAL,IAAqB,eAAe,YAAf,IAA+B,eAAe,CAAnE;AACA,aAAK,eAAL,IAAwB,cAAxB;AACA,aAAK,QAAL,IAAiB,OAAjB;AACA,aAAK,KAAL,IAAc,EAAd;AACA,aAAK,KAAL,IAAc,EAAd;AACA,aAAK,KAAL,IAAc,KAAK,QAAL,CAAc,SAAd,EAAyB,IAAzB,CAAd;AACA,aAAK,cAAL;AACH;;;;;;AAfL,gCAmBI,IAnBJ;AAAA,wBAmBW;AAAA,uBACsB,KAAK,KAAL,KAAe,WADrC;;AAAA,gBACE,IADF,QACE,IADF;AAAA,gBACQ,IADR,QACQ,IADR;AAAA,gBACc,IADd,QACc,IADd;;;AAGH,gBAAI,KAAK,QAAL,IAAiB,IAArB,EAA2B;AACvB,oBAAI,KAAK,MAAL,CAAY,IAAZ,CAAJ,EAAuB;AACnB,wBAAI,KAAK,UAAL,CAAgB,IAAhB,CAAJ,EAA2B;AACvB,4BAAI,KAAK,eAAL,CAAJ,EAA2B;;AAE1B,yBAFD,MAEO;AACH,sCAAM,IAAI,KAAJ,CAAU,oBAAV,CAAN;AACH;AACJ,qBAND,MAMO;AACH,4BAAI,KAAK,UAAL,CAAgB,KAAK,KAAL,CAAhB,CAAJ,EAAkC;AAAA;;AAC9B,gCAAI,cAAc,KAAK,qBAAL,CAA2B,IAA3B,EAAiC,IAAjC,EAAuC,IAAvC,CAAlB;AACA,gCAAI,SAAS,KAAK,WAAL,IAAoB,MAApB,GAA6B,SAA1C;AACA,2CAAK,KAAL,GAAY,MAAZ,mCAAuB,WAAvB;AACA,iCAAK,KAAL,EAAY,IAAZ,CAAiB,IAAjB;AACH;AACJ;AACJ;AACJ;;AAED,gBAAI,QAAQ,KAAK,KAAL,EAAY,KAAZ,EAAZ;AACA,gBAAI,OAAO,CAAC,KAAZ;;AAEA,iBAAK,KAAL,IAAc,KAAd;;AAEA,gBAAI,IAAJ,EAAU,KAAK,OAAL;;AAEV,mBAAO,EAAC,YAAD,EAAQ,UAAR,EAAP;AACH;;AAjDL;AAAA;;;;;;AAAA,gCAqDI,OArDJ;AAAA,2BAqDc;AACN,iBAAK,KAAL,EAAY,MAAZ,GAAqB,CAArB;AACA,iBAAK,KAAL,EAAY,MAAZ,GAAqB,CAArB;AACA,iBAAK,KAAL,IAAc,IAAd;AACH;;AAzDL;AAAA;;;;;;;AAAA,gCA8DI,MA9DJ;AAAA,wBA8DW,GA9DX,EA8DgB;AACR,mBAAO,aAAa,GAAb,CAAP;AACH;;AAhEL;AAAA;;;;;;;AAAA,gCAqEI,MArEJ;AAAA,wBAqEW,GArEX,EAqEgB;AACR,mBAAO,CAAC,KAAK,MAAL,CAAY,GAAZ,CAAR;AACH;;AAvEL;AAAA;;;;;;;AAAA,gCA4EI,UA5EJ;AAAA,4BA4Ee,GA5Ef,EA4EoB;AACZ,mBAAO,KAAK,KAAL,EAAY,OAAZ,CAAoB,GAApB,MAA6B,CAAC,CAArC;AACH;;AA9EL;AAAA;;;;;;;;;;AAAA,gCAsFI,qBAtFJ;AAAA,uCAsF0B,IAtF1B,EAsFgC,IAtFhC,EAsFsC,IAtFtC,EAsF4C;AAAA;;AACpC,mBAAO,QAAQ,IAAR,EAAc,GAAd,CAAkB;AAAA,uBACrB,MAAK,QAAL,CAAc,IAAd,EAAoB,KAAK,GAAL,CAApB,EAA+B,GAA/B,EAAoC,KAAK,MAAL,CAAY,GAAZ,CAApC,EAAsD,OAAO,CAA7D,CADqB;AAAA,aAAlB,CAAP;AAGH;;AA1FL;AAAA;;;;;;;;;;;;AAAA,gCAoGI,QApGJ;AAAA,0BAoGa,MApGb,EAoGqB,IApGrB,EAoG2B,GApG3B,EAoGqD;AAAA,gBAArB,IAAqB,yDAAd,EAAc;AAAA,gBAAV,IAAU,yDAAH,CAAG;;AAC7C,mBAAO,EAAC,cAAD,EAAS,UAAT,EAAe,QAAf,EAAoB,UAApB,EAA0B,UAA1B,EAAP;AACH;;AAtGL;AAAA;;;;;;;;AAAA,gCA4GI,UA5GJ;AAAA,4BA4Ge,KA5Gf,EA4GsB;AACd,mBAAO,IAAP;AACH;;AA9GL;AAAA;;;;;;;AAAA,gCAmHI,cAnHJ;AAAA,kCAmHqB;AAAA;;AACb,gBAAI;AACA,qBAAK,OAAO,QAAZ,IAAwB;AAAA;AAAA,iBAAxB;AACH,aAFD,CAEE,OAAM,CAAN,EAAS,CAAE;AAChB;;AAvHL;AAAA;;AAAA;AAAA;;AA0HA,IAAM,gBAAgB,OAAO,QAAP,GAAkB,MAAlB,GAA2B,MAAjD;;;;;;AAMA,SAAS,QAAT,CAAmB,GAAnB,EAAwB;AACpB,WAAO,QAAQ,aAAf;AACH;;AAED,SAAS,YAAT,CAAuB,GAAvB,EAA4B;AACxB,WAAO,QAAQ,IAAR,IAAgB,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAtC;AACH;;;;;;AAOD,SAAS,WAAT,CAAsB,GAAtB,EAA2B;AACvB,QAAI,CAAC,aAAa,GAAb,CAAL,EAAwB,OAAO,KAAP;AACxB,QAAI,SAAS,GAAT,CAAJ,EAAmB,OAAO,KAAP;AACnB,QAAG,EAAE,YAAY,GAAd,CAAH,EAAuB,OAAO,KAAP;AACvB,QAAI,SAAS,IAAI,MAAjB;AACA,QAAG,WAAW,CAAd,EAAiB,OAAO,IAAP;AACjB,WAAQ,SAAS,CAAV,IAAgB,GAAvB;AACH;;;;;;AAOD,SAAS,OAAT,CAAkB,MAAlB,EAA0B;AACtB,QAAI,QAAQ,KAAK,MAAL,CAAZ;AACA,QAAI,MAAM,OAAN,CAAc,MAAd,CAAJ,EAA2B;;AAE1B,KAFD,MAEO,IAAG,YAAY,MAAZ,CAAH,EAAwB;;AAE3B,oBAAQ,MAAM,MAAN,CAAa,UAAC,GAAD;AAAA,uBAAS,MAAM,OAAO,GAAP,CAAN,KAAsB,GAA/B;AAAA,aAAb,CAAR;;AAEH,SAJM,MAIA;;AAEH,wBAAQ,MAAM,IAAN,EAAR;AACH;AACD,WAAO,KAAP;AACH,6H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1JD,IAAI,WAAW,OAAO,MAAP,KAAkB,WAAjC;;AAEA,SAAS,eAAT,CAAyB,GAAzB,EAA8B;AAC1B,WAAO,CAAC,EACH,YAAY,eAAe,MAA5B,IACG,eAAe,IADlB,IAEG,eAAe,MAHd,CAAR;AAKH;;AAED,SAAS,kBAAT,CAA4B,GAA5B,EAAiC;AAC7B,QAAI,YAAY,eAAe,MAA/B,EAAuC;AACnC,YAAI,IAAI,IAAI,MAAJ,CAAW,IAAI,MAAf,CAAR;AACA,YAAI,IAAJ,CAAS,CAAT;AACA,eAAO,CAAP;AACH,KAJD,MAIO,IAAI,eAAe,IAAnB,EAAyB;AAC5B,eAAO,IAAI,IAAJ,CAAS,IAAI,OAAJ,EAAT,CAAP;AACH,KAFM,MAEA,IAAI,eAAe,MAAnB,EAA2B;AAC9B,eAAO,IAAI,MAAJ,CAAW,GAAX,CAAP;AACH,KAFM,MAEA;AACH,cAAM,IAAI,KAAJ,CAAU,sBAAV,CAAN;AACH;AACJ;;;;;AAKD,SAAS,cAAT,CAAwB,GAAxB,EAA6B;AACzB,QAAI,QAAQ,EAAZ;AACA,QAAI,OAAJ,CAAY,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAC/B,YAAI,QAAO,IAAP,yCAAO,IAAP,OAAgB,QAAhB,IAA4B,SAAS,IAAzC,EAA+C;AAC3C,gBAAI,MAAM,OAAN,CAAc,IAAd,CAAJ,EAAyB;AACrB,sBAAM,KAAN,IAAe,eAAe,IAAf,CAAf;AACH,aAFD,MAEO,IAAI,gBAAgB,IAAhB,CAAJ,EAA2B;AAC9B,sBAAM,KAAN,IAAe,mBAAmB,IAAnB,CAAf;AACH,aAFM,MAEA;AACH,sBAAM,KAAN,IAAe,WAAW,EAAX,EAAe,IAAf,CAAf;AACH;AACJ,SARD,MAQO;AACH,kBAAM,KAAN,IAAe,IAAf;AACH;AACJ,KAZD;AAaA,WAAO,KAAP;AACH;;;;;;;;;;;AAWD,SAAS,UAAT,G,2BAAkD;AAC9C,QAAI,UAAU,MAAV,GAAmB,CAAnB,IAAwB,QAAO,UAAU,CAAV,CAAP,MAAwB,QAApD,EAA8D;AAC1D,eAAO,KAAP;AACH;;AAED,QAAI,UAAU,MAAV,GAAmB,CAAvB,EAA0B;AACtB,eAAO,UAAU,CAAV,CAAP;AACH;;AAED,QAAI,SAAS,UAAU,CAAV,CAAb;;;AAGA,QAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAX;;AAEA,QAAI,GAAJ,EAAS,GAAT,EAAc,KAAd;;AAEA,SAAK,OAAL,CAAa,UAAU,GAAV,EAAe;;AAExB,YAAI,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAf,IAA2B,MAAM,OAAN,CAAc,GAAd,CAA/B,EAAmD;AAC/C;AACH;;AAED,eAAO,IAAP,CAAY,GAAZ,EAAiB,OAAjB,CAAyB,UAAU,GAAV,EAAe;AACpC,kBAAM,OAAO,GAAP,CAAN,C;AACA,kBAAM,IAAI,GAAJ,CAAN,C;;;AAGA,gBAAI,QAAQ,MAAZ,EAAoB;AAChB;;;;;;AAMH,aAPD,MAOO,IAAI,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAf,IAA2B,QAAQ,IAAvC,EAA6C;AAChD,2BAAO,GAAP,IAAc,GAAd;AACA;;;AAGH,iBALM,MAKA,IAAI,MAAM,OAAN,CAAc,GAAd,CAAJ,EAAwB;AAC3B,+BAAO,GAAP,IAAc,eAAe,GAAf,CAAd;AACA;;;AAGH,qBALM,MAKA,IAAI,gBAAgB,GAAhB,CAAJ,EAA0B;AAC7B,mCAAO,GAAP,IAAc,mBAAmB,GAAnB,CAAd;AACA;;;AAGH,yBALM,MAKA,IAAI,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAf,IAA2B,QAAQ,IAAnC,IAA2C,MAAM,OAAN,CAAc,GAAd,CAA/C,EAAmE;AACtE,uCAAO,GAAP,IAAc,WAAW,EAAX,EAAe,GAAf,CAAd;AACA;;;AAGH,6BALM,MAKA;AACH,2CAAO,GAAP,IAAc,WAAW,GAAX,EAAgB,GAAhB,CAAd;AACA;AACH;AACJ,SApCD;AAqCH,KA3CD;;AA6CA,WAAO,MAAP;AACH;;AAED,SAAS,UAAT,GAAsB,UAAtB,6F;;;;;;;;;;;;ACjJA,IAAI,SAAS,MAAM,SAAN,CAAgB,KAA7B;AACA,IAAI,aAAa,OAAO,IAAxB;;AAEA,SAAS,WAAT,CAAsB,MAAtB,EAA8B;AAC1B,WAAO,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,MAA/B,KAA0C,oBAAjD;AACH;;AAED,IAAI,YAAY,SAAZ,SAAY,CAAU,MAAV,EAAkB,QAAlB,EAA4B,IAA5B,EAAkC;AAC9C,QAAI,CAAC,IAAL,EAAW,OAAO,EAAP;;AAEX,QAAI,WAAW,QAAf,EAAyB;AACrB,eAAO,IAAP;AAEH,KAHD,MAGO,IAAI,kBAAkB,IAAlB,IAA0B,oBAAoB,IAAlD,EAAwD;AAC3D,eAAO,OAAO,OAAP,OAAqB,SAAS,OAAT,EAA5B;;;;AAIH,KALM,MAKA,IAAI,QAAO,MAAP,yCAAO,MAAP,MAAiB,QAAjB,IAA6B,QAAO,QAAP,yCAAO,QAAP,MAAmB,QAApD,EAA8D;AACjE,mBAAO,KAAK,MAAL,GAAc,WAAW,QAAzB,GAAoC,UAAU,QAArD;;;;;;;;AAQH,SATM,MASA;AACH,uBAAO,SAAS,MAAT,EAAiB,QAAjB,EAA2B,IAA3B,CAAP;AACH;AACJ,CAvBD;;AAyBA,SAAS,iBAAT,CAA4B,KAA5B,EAAmC;AAC/B,WAAO,UAAU,IAAV,IAAkB,UAAU,SAAnC;AACH;;AAED,SAAS,QAAT,CAAmB,CAAnB,EAAsB;AAClB,QAAI,CAAC,CAAD,IAAM,QAAO,CAAP,yCAAO,CAAP,OAAa,QAAnB,IAA+B,OAAO,EAAE,MAAT,KAAoB,QAAvD,EAAiE,OAAO,KAAP;AACjE,QAAI,OAAO,EAAE,IAAT,KAAkB,UAAlB,IAAgC,OAAO,EAAE,KAAT,KAAmB,UAAvD,EAAmE;AAC/D,eAAO,KAAP;AACH;AACD,QAAI,EAAE,MAAF,GAAW,CAAX,IAAgB,OAAO,EAAE,CAAF,CAAP,KAAgB,QAApC,EAA8C,OAAO,KAAP;AAC9C,WAAO,IAAP;AACH;;AAED,SAAS,QAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,IAAzB,EAA+B;AAC3B,QAAI,CAAJ,EAAO,GAAP;AACA,QAAI,kBAAkB,CAAlB,KAAwB,kBAAkB,CAAlB,CAA5B,EACI,OAAO,KAAP;;AAEJ,QAAI,EAAE,SAAF,KAAgB,EAAE,SAAtB,EAAiC,OAAO,KAAP;;;AAGjC,QAAI,YAAY,CAAZ,CAAJ,EAAoB;AAChB,YAAI,CAAC,YAAY,CAAZ,CAAL,EAAqB;AACjB,mBAAO,KAAP;AACH;AACD,YAAI,OAAO,IAAP,CAAY,CAAZ,CAAJ;AACA,YAAI,OAAO,IAAP,CAAY,CAAZ,CAAJ;AACA,eAAO,UAAU,CAAV,EAAa,CAAb,EAAgB,IAAhB,CAAP;AACH;AACD,QAAI,SAAS,CAAT,CAAJ,EAAiB;AACb,YAAI,CAAC,SAAS,CAAT,CAAL,EAAkB;AACd,mBAAO,KAAP;AACH;AACD,YAAI,EAAE,MAAF,KAAa,EAAE,MAAnB,EAA2B,OAAO,KAAP;AAC3B,aAAK,IAAI,CAAT,EAAY,IAAI,EAAE,MAAlB,EAA0B,GAA1B,EAA+B;AAC3B,gBAAI,EAAE,CAAF,MAAS,EAAE,CAAF,CAAb,EAAmB,OAAO,KAAP;AACtB;AACD,eAAO,IAAP;AACH;AACD,QAAI;AACA,YAAI,KAAK,WAAW,CAAX,CAAT;AAAA,YACI,KAAK,WAAW,CAAX,CADT;AAEH,KAHD,CAGE,OAAO,CAAP,EAAU;;AACR,eAAO,KAAP;AACH;;;AAGD,QAAI,GAAG,MAAH,IAAa,GAAG,MAApB,EACI,OAAO,KAAP;;AAEJ,OAAG,IAAH;AACA,OAAG,IAAH;;AAEA,SAAK,IAAI,GAAG,MAAH,GAAY,CAArB,EAAwB,KAAK,CAA7B,EAAgC,GAAhC,EAAqC;AACjC,YAAI,GAAG,CAAH,KAAS,GAAG,CAAH,CAAb,EACI,OAAO,KAAP;AACP;;;AAGD,SAAK,IAAI,GAAG,MAAH,GAAY,CAArB,EAAwB,KAAK,CAA7B,EAAgC,GAAhC,EAAqC;AACjC,cAAM,GAAG,CAAH,CAAN;AACA,YAAI,CAAC,UAAU,EAAE,GAAF,CAAV,EAAkB,EAAE,GAAF,CAAlB,EAA0B,IAA1B,CAAL,EAAsC,OAAO,KAAP;AACzC;AACD,WAAO,QAAO,CAAP,yCAAO,CAAP,eAAoB,CAApB,yCAAoB,CAApB,EAAP;AACH;;AAGD,SAAS,SAAT,GAAqB,SAArB,+F;;;;;;;;;;;ACnGA;;;;;;;;;AASA,SAAS,UAAT,GAAsB,UAAU,MAAV,EAAkB;AACpC,WAAO,OAAO,MAAP,CAAc,CAAd,EAAiB,WAAjB,KAAiC,OAAO,SAAP,CAAiB,CAAjB,EAAoB,WAApB,EAAxC;AACH,CAFD;;;;;;;;AAWA,SAAS,eAAT,GAA2B,UAAU,MAAV,EAAkB;AACzC,WAAO,OAAO,MAAP,CAAc,CAAd,EAAiB,WAAjB,KAAiC,OAAO,KAAP,CAAa,CAAb,CAAxC;AACH,CAFD;;;;;;;;AAUA,SAAS,2BAAT,GAAuC,UAAS,IAAT,EAAc;AACjD,UAAM,IAAN,EAAY,MAAZ;AACA,WAAO,EAAE,GAAF,CAAM,IAAN,EAAY,UAAU,CAAV,EAAa;AAC5B,YAAI,IAAI,EAAE,WAAF,EAAR;AACA,aAAK,EAAE,WAAF,EAAL;AACA,eAAO,MAAM,CAAN,GAAU,GAAjB;AACH,KAJM,CAAP;AAKA,WAAO,KAAK,IAAL,CAAU,EAAV,CAAP;AACA,WAAO,IAAI,MAAJ,CAAW,IAAX,CAAP;AACH,CATD;;;;;;;;;AAmBA,SAAS,YAAT,GAAwB,UAAU,MAAV,EAAkB,IAAlB,EAAwB;AAC5C,WAAO,CAAC,KAAK,MAAL,KAAgB,CAAjB,EAAoB,QAApB,CAA6B,QAAQ,EAArC,EAAyC,MAAzC,CAAgD,CAAhD,EAAmD,UAAU,CAA7D,CAAP;AACH,CAFD;;;;;;;;AAWA,SAAS,SAAT,GAAqB,UAAU,MAAV,EAAkB;AACnC,WAAO,OAAO,WAAP,GAAqB,OAArB,CAA6B,OAA7B,EAAsC,UAAS,KAAT,EAAgB,MAAhB,EAAwB;AACjE,eAAO,OAAO,WAAP,EAAP;AACH,KAFM,CAAP;AAGH,CAJD;;;;;;;;AAaA,SAAS,mBAAT,GAA8B,UAAU,MAAV,EAAkB;AAC5C,QAAI,gBAAgB;AAChB,aAAK,GADW;AAEhB,aAAK,GAFW;AAGhB,aAAK,GAHW;AAIhB,aAAK,GAJW;AAKhB,aAAK,GALW;AAMhB,aAAK,GANW;AAOhB,aAAK,GAPW;AAQhB,aAAK,GARW;AAShB,aAAK,GATW;AAUhB,aAAK,GAVW;AAWhB,aAAK,GAXW;AAYhB,aAAK,GAZW;AAahB,aAAK,GAbW;AAchB,aAAK,GAdW;AAehB,aAAK,GAfW;AAgBhB,aAAK,GAhBW;AAiBhB,aAAK,GAjBW;AAkBhB,aAAK,GAlBW;;AAoBhB,aAAI,GApBY;AAqBhB,aAAI,GArBY;AAsBhB,aAAI,GAtBY;;AAwBhB,aAAI,GAxBY;AAyBhB,aAAI,GAzBY;AA0BhB,aAAI,GA1BY;AA2BhB,aAAI,GA3BY;AA4BhB,aAAI,GA5BY;;AA8BhB,aAAI,GA9BY;AA+BhB,aAAI,GA/BY;AAgChB,aAAI,GAhCY;AAiChB,aAAI,GAjCY;AAkChB,aAAI,GAlCY;AAmChB,aAAI,GAnCY;AAoChB,aAAI,GApCY;;AAsChB,aAAI,GAtCY;AAuChB,aAAI,GAvCY;AAwChB,aAAI,GAxCY;AAyChB,aAAI,GAzCY;AA0ChB,aAAI,GA1CY;;AA4ChB,aAAI,GA5CY;AA6ChB,aAAI,GA7CY;AA8ChB,aAAI,GA9CY;AA+ChB,aAAI,GA/CY;AAgDhB,aAAI,GAhDY;AAiDhB,aAAI,GAjDY;;AAmDhB,aAAI,GAnDY;AAoDhB,aAAI,GApDY;AAqDhB,aAAI,GArDY;AAsDhB,aAAI,GAtDY;;AAwDhB,aAAI,GAxDY;AAyDhB,aAAI,GAzDY;AA0DhB,aAAI,GA1DY;AA2DhB,aAAI,GA3DY;;AA6DhB,aAAI,GA7DY;AA8DhB,aAAI,GA9DY;AA+DhB,aAAI,GA/DY;AAgEhB,aAAI,GAhEY;AAiEhB,aAAI,GAjEY;AAkEhB,aAAI,GAlEY;AAmEhB,aAAI,GAnEY;AAoEhB,aAAI,GApEY;AAqEhB,aAAI,GArEY;AAsEhB,aAAI,GAtEY;AAuEhB,aAAI,GAvEY;AAwEhB,aAAI,GAxEY;AAyEhB,aAAI,GAzEY;AA0EhB,aAAI,GA1EY;;AA4EhB,aAAI,GA5EY;AA6EhB,aAAI,GA7EY;AA8EhB,aAAI;AA9EY,KAApB;AAgFA,WAAO,OAAO,OAAP,CACH,yEADG,EAEH,UAAS,CAAT,EAAY;AAAE,eAAO,cAAc,CAAd,CAAP;AAA0B,KAFrC,CAAP;AAIH,CArFD,4H;;;;;;;;;;;ACzEA;;;;AAEA,IAAI,oBAAoB,IAAI,OAAO,UAAX,CAAsB,kBAAtB,CAAxB;AACA,YAAY;AACR,cAAO;AACH;AAAK,yBAAS,IAAT,EAAe,KAAf,EAAsB,iBAAtB,EAAwC;AACzC,oBAAI,MAAM,EAAC,MAAM,IAAP,EAAa,OAAM,KAAnB,EAA0B,QAAQ,QAAlC,EAA4C,cAAc,IAAI,IAAJ,EAA1D,EAAV;AACA,oBAAG,iBAAH,EAAqB;AACjB,wBAAI,iBAAJ,GAAwB,iBAAxB;AACH;;AAED,oBAAG,OAAO,QAAV,EAAmB;AACf,2BAAO,KAAK,GAAL,CAAP;AACH;;AAED,uBAAO,CAAC,CAAC,kBAAkB,MAAlB,CACL,EAAC,MAAM,IAAP,EAAa,QAAQ,QAArB,EADK,EAEL,GAFK,CAAT;AAIH;;AAdD;AAAA,WADG;AAgBH;AAAK,yBAAS,IAAT,EAAe,YAAf,EAA4B;AAC7B,oBAAI,MAAM,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,QAArB,EAA1B,CAAV;AACA,oBAAG,EAAE,WAAF,CAAc,GAAd,CAAH,EAAuB;AACnB,2BAAO,YAAP;AACH;AACD,uBAAO,IAAI,KAAX;AACH;;AAND;AAAA,WAhBG;AAuBH;AAAQ,4BAAS,IAAT,EAAc;AACnB,uBAAO,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,QAArB,EAA1B,CAAP;AACF;;AAFD;AAAA,WAvBG;AA0BH;AAAM,0BAAS,QAAT,EAAmB,OAAnB,EAA4B;AAC9B,0BAAU,WAAW,EAArB;AACA,2BAAW,EAAE,MAAF,CAAS,EAAC,QAAQ,QAAT,EAAT,EAA6B,YAAU,EAAvC,CAAX;AACA,uBAAO,kBAAkB,IAAlB,CAAuB,QAAvB,EAAiC,OAAjC,CAAP;AACH;;AAJD;AAAA;AA1BG,KADC;AAiCR,WAAO;AACH;AAAK,yBAAS,IAAT,EAAe,KAAf,EAAsB,MAAtB,EAA6B;AAC9B,oBAAG,CAAC,MAAJ,EAAW;AACP,6BAAS,OAAO,MAAP,EAAT;AACH;AACD,yBAAS,SAAS,eAAT,CAAyB,MAAzB,CAAT;AACA,oBAAG,CAAC,MAAJ,EAAW;AACP,0BAAM,OAAO,KAAP,CAAa,GAAb,EAAkB,gBAAlB,CAAN;AACH;AACD,oBAAI,MAAO,EAAC,MAAM,IAAP,EAAa,OAAM,KAAnB,EAA0B,QAAQ,MAAlC,EAA0C,cAAc,IAAI,IAAJ,EAAxD,EAAX;AACA,oBAAG,OAAO,QAAV,EAAoB;AAChB,2BAAO,KAAK,GAAL,CAAP;AACH;;AAED,oBAAG,EAAE,WAAF,CAAc,KAAd,CAAH,EAAwB;AACpB,2BAAO,CAAC,CAAC,kBAAkB,MAAlB,CAAyB,EAAC,MAAM,IAAP,EAAa,QAAQ,MAArB,EAAzB,CAAT;AACH;;AAED,uBAAO,CAAC,CAAC,kBAAkB,MAAlB,CACL,EAAC,MAAM,IAAP,EAAa,QAAQ,MAArB,EADK,EAEL,GAFK,CAAT;AAIH;;AArBD;AAAA,WADG;AAuBH;AAAK,yBAAS,IAAT,EAAe,YAAf,EAA6B,MAA7B,EAAoC;AACrC,oBAAG,CAAC,MAAJ,EAAW;AACP,6BAAS,OAAO,MAAP,EAAT;AACH;AACD,yBAAS,SAAS,eAAT,CAAyB,MAAzB,CAAT;AACA,oBAAG,CAAC,MAAJ,EAAW;AACP,0BAAM,OAAO,KAAP,CAAa,GAAb,EAAkB,gBAAlB,CAAN;AACH;AACD,oBAAI,MAAM,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,MAArB,EAA1B,CAAV;AACA,oBAAG,EAAE,WAAF,CAAc,GAAd,CAAH,EAAuB;AACnB,2BAAO,YAAP;AACH;AACD,uBAAO,IAAI,KAAX;AACH;;AAbD;AAAA,WAvBG;AAqCH;AAAQ,4BAAS,IAAT,EAAe,MAAf,EAAsB;AAC1B,uBAAO,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,MAArB,EAA1B,CAAP;AACH;;AAFD;AAAA,WArCG;AAwCH;AAAM,0BAAS,QAAT,EAAmB,OAAnB,EAA4B;AAC9B,0BAAU,WAAW,EAArB;AACA,2BAAW,EAAE,MAAF,CAAS,EAAC,QAAQ,QAAT,EAAT,EAA6B,YAAU,EAAvC,CAAX;AACA,uBAAO,kBAAkB,IAAlB,CAAuB,QAAvB,EAAiC,OAAjC,CAAP;AACH;;AAJD;AAAA;AAxCG,KAjCC;AA+ER;AAAS,yBAAS,EAAT,EAAY;AACjB,gBAAG,CAAC,EAAE,UAAF,CAAa,EAAb,CAAJ,EAAqB;AACjB,sBAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,6CAA2C,EAA3C,yCAA2C,EAA3C,EAAtB,CAAN;AACH;AACD,gBAAG,OAAO,QAAV,EAAmB;AACf,mBAAG,IAAH,CAAQ,IAAR;AACH,aAFD,MAEM;AACF,oBAAI,OAAO,IAAX;AACA,wBAAQ,OAAR,CAAgB,UAAS,CAAT,EAAW;AACvB,wBAAG,UAAU,KAAV,EAAH,EAAqB;AACjB,2BAAG,IAAH,CAAQ,IAAR;AACA,0BAAE,IAAF;AACH;AACJ,iBALD;AAMH;AACJ;;AAfD;AAAA;AA/EQ,CAAZ;;AAiGA,IAAI,OAAO,SAAP,IAAO,CAAS,GAAT,EAAa;AACpB,cAAU,OAAV,CAAkB,YAAU;AACxB,YAAI,MAAM,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAI,IAAX,EAAiB,QAAQ,IAAI,MAA7B,EAA1B,CAAV;AACA,YAAG,GAAH,EAAO;AACH,gBAAG,EAAE,WAAF,CAAc,IAAI,KAAlB,CAAH,EAA4B;AACxB,uBAAO,CAAC,CAAC,kBAAkB,MAAlB,CAAyB,EAAC,MAAM,IAAI,IAAX,EAAiB,QAAQ,IAAI,MAA7B,EAAzB,CAAT;AACH;AACD,8BAAkB,MAAlB,CACI,EAAC,KAAK,IAAI,GAAV,EADJ,EAEI,EAAC,MAAM,GAAP,EAFJ;AAIH,SARD,MAQO;AACH,8BAAkB,MAAlB,CAAyB,GAAzB;AACH;AACJ,KAbD;AAcA,WAAO,IAAP;AACH,CAhBD;;AAkBA,IAAG,OAAO,QAAV,EAAmB;AACf,cAAU,KAAV,GAAkB;AAAA,eAAM,IAAN;AAAA,KAAlB;AACA,2BAAoB;AAChB,WADgB;AAAA,yBACX,IADW,EACL,KADK,EACE;AACd,oBAAI,EAAE,WAAF,CAAc,KAAd,CAAJ,EAA0B;AACtB,2BAAO,CAAC,CAAC,kBAAkB,MAAlB,CAAyB,EAAC,MAAM,IAAP,EAAa,QAAQ,SAArB,EAAzB,CAAT;AACH;AACD,uBAAO,CAAC,CAAC,kBAAkB,MAAlB,CACL,EAAC,MAAM,IAAP,EAAa,QAAQ,SAArB,EADK,EAEL,EAAC,MAAM,IAAP,EAAa,OAAO,KAApB,EAA2B,QAAQ,SAAnC,EAA8C,cAAc,IAAI,IAAJ,EAA5D,EAFK,CAAT;AAIH;;AATe;AAAA;AAUhB,WAVgB;AAAA,yBAUX,IAVW,EAUL,YAVK,EAUS;AACrB,oBAAI,MAAM,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,SAArB,EAA1B,CAAV;AACA,oBAAI,EAAE,WAAF,CAAc,GAAd,CAAJ,EAAwB;AACpB,2BAAO,YAAP;AACH;AACD,uBAAO,IAAI,KAAX;AACH;;AAhBe;AAAA;AAiBhB,cAjBgB;AAAA,4BAiBR,IAjBQ,EAiBF;AACV,uBAAO,kBAAkB,OAAlB,CAA0B,EAAC,MAAM,IAAP,EAAa,QAAQ,SAArB,EAA1B,CAAP;AACH;;AAnBe;AAAA;AAoBhB,YApBgB;AAAA,0BAoBV,QApBU,EAoBA,OApBA,EAoBS;AACrB,0BAAU,WAAW,EAArB;AACA,2BAAW,EAAE,MAAF,CAAS,EAAC,QAAQ,QAAT,EAAT,EAA6B,YAAU,EAAvC,CAAX;AACA,uBAAO,kBAAkB,IAAlB,CAAuB,QAAvB,EAAiC,OAAjC,CAAP;AACH;;AAxBe;AAAA;AAyBhB,eAzBgB;AAAA,6BAyBP,IAzBO,EAyBD,QAzBC,EAyBS,OAzBT,EAyBkB;AAC9B,oBAAI,CAAC,qBAAkB,GAAlB,CAAsB,YAAY,IAAlC,CAAL,EAA8C;AAC1C,wBAAI,MAAJ;AAAA,wBAAY;AAAW,iCAAX,QAAW,MAAO;AAC1B,gCAAI,GAAJ,EAAS;AACL,qDAAkB,GAAlB,CAAsB,YAAY,IAAlC;AACH,6BAFD,MAEO;AACH,qDAAkB,GAAlB,CAAsB,YAAY,IAAlC,EAAwC,IAAI,IAAJ,EAAxC;AACH;AACD,sCAAU,IAAV;AACA,oCAAQ,GAAR,CAAY,eAAZ,EAA6B,IAA7B,EAAmC,cAAY,MAAI,QAAJ,GAAa,IAAzB,CAAnC,EAAmE,uBAAnE;AACH;;AARW;AAAA,uBAAZ;AASA,wBAAI;AACA,iCAAS,SAAS,QAAT,CAAT;AACA,4BAAI,UAAU,OAAO,OAAO,IAAd,KAAuB,UAArC,EAAiD;AAC7C,sCAAU,IAAV;AACA,mCAAO,IAAP,CACI,YAAM;AACF,qDAAkB,GAAlB,CAAsB,YAAY,IAAlC,EAAwC,IAAI,IAAJ,EAAxC;AACA,wCAAQ,GAAR,CAAY,eAAZ,EAA6B,IAA7B,EAAmC,YAAnC,EAAiD,gBAAjD;AACH,6BAJL,EAKI,YAAM;AACF,0CAAU,IAAV;AACA,qDAAkB,GAAlB,CAAsB,YAAY,IAAlC;AACA,wCAAQ,GAAR,CAAY,eAAZ,EAA6B,IAA7B,EAAmC,gBAAnC,EAAqD,gBAArD;AACH,6BATL;AAWH;AACJ,qBAhBD,CAgBE,OAAO,CAAP,EAAU;AACR,gCAAQ,KAAR,CAAc,CAAd;AACA,iCAAS,KAAT;AACH;AACD,wBAAI,OAAJ,EAAa;AACT;AACH;AACD,wBAAI,WAAW,KAAf,EAAsB;AAClB,6CAAkB,GAAlB,CAAsB,YAAY,IAAlC,EAAwC,IAAI,IAAJ,EAAxC;AACH;AACD,4BAAQ,GAAR,CAAY,eAAZ,EAA6B,IAA7B,EAAmC,cAAa,WAAW,KAAZ,GAAmB,IAAnB,GAAwB,QAApC,CAAnC;AACH;AACJ;;AAhEe;AAAA;AAAA,KAApB;;AAmEA,cAAU,OAAV,GAAoB,qBAAkB,OAAtC;;AAEA,WAAO,OAAP,CAAe,WAAf,EAA4B,YAAY;AACpC,YAAI,QAAQ,EAAC,QAAQ,QAAT,EAAZ;AACA,YAAG,EAAE,QAAF,CAAW,KAAK,MAAhB,KAA2B,KAAK,MAAL,KAAgB,SAA9C,EAAwD;AACpD,oBAAQ,EAAC,KAAI,CAAC,KAAD,EAAQ,EAAC,QAAQ,KAAK,MAAd,EAAR,CAAL,EAAR;AACH;AACD,eAAO,kBAAkB,IAAlB,CAAuB,KAAvB,CAAP;AACH,KAND;;AAQA,sBAAkB,YAAlB,CAA+B,EAAC,MAAK,CAAN,EAAS,QAAO,CAAhB,EAA/B,EAAmD,EAAC,QAAQ,CAAT,EAAnD;AACA,wBAAiB,iBAAjB,GAAqC,EAArC;AACA,wBAAiB,kBAAjB;AAAsC,iBAAS,kBAAT,CAA6B,eAA7B,EAA8C;AAChF,gBAAI,oBAAoB,UAAxB,EAAoC;AAChC,sBAAM,IAAI,KAAJ,CAAU,qCAAV,CAAN;AACH;AACD,gCAAiB,iBAAjB,CAAmC,IAAnC,CAAwC,eAAxC;AACH;;AALD,eAA+C,kBAA/C;AAAA;;AAOA,QAAI,eAAe,SAAf,YAAe,CAAS,MAAT,EAAiB,GAAjB,EAAqB;AACpC,YAAG,IAAI,iBAAP,EAAyB;AACrB,mBAAO,KAAP;AACH;AACD,gBAAO,IAAI,MAAX;AACI,iBAAK,QAAL;;AAEI,oBAAI,SAAS,IAAb;AACA,oBAAI,OAAO,QAAP,KAAoB,WAAxB,EAAoC;AAChC,6BAAS,SAAS,eAAT,EAAT;AACH;;AAED,oBAAI,oBAAiB,iBAAjB,CAAmC,MAAvC,EAA8C;AAC1C,6BAAS,oBAAiB,iBAAjB,CAAmC,KAAnC,CAAyC,UAAS,EAAT,EAAY;AAC1D,4BAAI,MAAM,GAAG,MAAH,EAAW,GAAX,EAAgB,MAAhB,CAAV;AACA,+BAAO,OAAO,QAAQ,SAAtB;AACH,qBAHQ,CAAT;AAIH;;AAEL,uBAAO,MAAP;AACA,iBAAK,SAAL;AACI,uBAAO,KAAP;AAjBR;AAmBA,eAAO,IAAI,MAAJ,KAAe,MAAtB;AACH,KAxBD;;AA0BA,sBAAkB,KAAlB,CAAwB;AACpB,gBAAQ,YADY;AAEpB,gBAAQ,YAFY;AAGpB,gBAAQ;AAHY,KAAxB;AAMH,CAxHD,MAwHM;AACF,QAAI,aAAa,OAAO,SAAP,CAAiB,WAAjB,CAAjB;AACA,cAAU,KAAV,GAAkB,WAAW,KAA7B;AACH,6H;;;;;;;;;;;ACjPD,SAAS,OAAT;AAAmB,aAAS,UAAT,GAAsB;AACrC,aAAK,UAAL,GAAkB,EAAlB;AACH;;AAFD,WAA4B,UAA5B;AAAA;;AAIA,SAAS,OAAT,CAAiB,SAAjB,CAA2B,IAA3B;AAAkC,aAAS,IAAT,CAAc,SAAd,EAAyB;AACvD,YAAI,CAAC,MAAM,OAAN,CAAc,KAAK,UAAL,CAAgB,SAAhB,CAAd,CAAL,EAAgD;AAC5C,mBAAO,IAAP;AACH;AACD,YAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAX;AACA,aAAK,UAAL,CAAgB,SAAhB,EAA2B,OAA3B;AAAmC,qBAAS,KAAT,CAAe,QAAf,EAAyB;AACxD,yBAAS,KAAT,CAAe,IAAf,EAAqB,IAArB;AACH;;AAFD,mBAA4C,KAA5C;AAAA,aAEG,IAFH;;AAIA,eAAO,IAAP;AACH;;AAVD,WAA2C,IAA3C;AAAA;;AAYA,SAAS,OAAT,CAAiB,SAAjB,CAA2B,EAA3B;AAAgC,aAAS,EAAT,CAAY,SAAZ,EAAuB,QAAvB,EAAiC;AAC7D,YAAI,CAAC,MAAM,OAAN,CAAc,KAAK,UAAL,CAAgB,SAAhB,CAAd,CAAL,EAAgD;AAC5C,iBAAK,UAAL,CAAgB,SAAhB,IAA6B,EAA7B;AACH;;AAED,YAAI,KAAK,UAAL,CAAgB,SAAhB,EAA2B,OAA3B,CAAmC,QAAnC,MAAiD,CAAC,CAAtD,EAAyD;AACrD,iBAAK,UAAL,CAAgB,SAAhB,EAA2B,IAA3B,CAAgC,QAAhC;AACH;;AAED,eAAO,IAAP;AACH;;AAVD,WAAyC,EAAzC;AAAA;;AAYA,SAAS,OAAT,CAAiB,SAAjB,CAA2B,IAA3B;AAAkC,aAAS,IAAT,CAAc,SAAd,EAAyB,QAAzB,EAAmC;AACjE,YAAI,OAAO,IAAX;AACA,iBAAS,KAAT,GAAiB;AACb,gBAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAX;AACA,iBAAK,GAAL,CAAS,SAAT,EAAoB,KAApB;AACA,qBAAS,KAAT,CAAe,IAAf,EAAqB,IAArB;AACH;AACD,cAAM,QAAN,GAAiB,QAAjB;AACA,eAAO,KAAK,EAAL,CAAQ,SAAR,EAAmB,KAAnB,CAAP;AACH;;AATD,WAA2C,IAA3C;AAAA;;AAWA,SAAS,OAAT,CAAiB,SAAjB,CAA2B,GAA3B;AAAiC,aAAS,GAAT,CAAa,SAAb,EAAwB,QAAxB,EAAkC;AAC/D,YAAI,CAAC,MAAM,OAAN,CAAc,KAAK,UAAL,CAAgB,SAAhB,CAAd,CAAL,EAAgD;AAC5C,mBAAO,IAAP;AACH;AACD,YAAI,OAAO,QAAP,KAAoB,WAAxB,EAAqC;AACjC,iBAAK,UAAL,CAAgB,SAAhB,IAA6B,EAA7B;AACA,mBAAO,IAAP;AACH;AACD,YAAI,QAAQ,KAAK,UAAL,CAAgB,SAAhB,EAA2B,OAA3B,CAAmC,QAAnC,CAAZ;AACA,YAAI,UAAU,CAAC,CAAf,EAAkB;AACd,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,UAAL,CAAgB,SAAhB,EAA2B,MAA/C,EAAuD,KAAK,CAA5D,EAA+D;AAC3D,oBAAI,KAAK,UAAL,CAAgB,SAAhB,EAA2B,CAA3B,EAA8B,QAA9B,KAA2C,QAA/C,EAAyD;AACrD,4BAAQ,CAAR;AACA;AACH;AACJ;AACJ;AACD,aAAK,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,CAAkC,KAAlC,EAAyC,CAAzC;AACA,eAAO,IAAP;AACH;;AAnBD,WAA0C,GAA1C;AAAA,4H","file":"/packages/universe_utilities.js","sourcesContent":["'use strict';\n\n/* global UniUtils: true */\n\nUniUtils = {\n    /**\n     * Creates an empty object inside namespace if not existent.\n     * @param object\n     * @param {String} key\n     * @param {*} value in key. default is object if no matches in key\n     * @example var obj = {};\n     * set(obj, 'foo.bar'); // {}\n     * console.log(obj);  // {foo:{bar:{}}}\n     * @returns {*} it'll return created object or existing object.\n     */\n    set: function set (object, key, value) {\n        if (typeof key !== 'string') {\n            console.warn('Key must be string.');\n            return object;\n        }\n\n        var keys = key.split('.');\n        var copy = object;\n\n        while (key = keys.shift()) {\n            if (copy[key] === undefined) {\n                if (+keys[0] === +keys[0]) {\n                    copy[key] = [];\n                } else {\n                    copy[key] = {};\n                }\n            }\n\n            if (value !== undefined && keys.length === 0) {\n                copy[key] = value;\n            }\n\n            copy = copy[key];\n        }\n\n        return object;\n    },\n\n    /**\n     * Returns nested property value.\n     * @param obj\n     * @param key\n     * @param defaultValue {*=undefined}\n     * @example var obj = {\n        foo : {\n            bar : 11\n        }\n    };\n\n     get(obj, 'foo.bar'); // \"11\"\n     get(obj, 'ipsum.dolorem.sit');  // undefined\n     * @returns {*} found property or undefined if property doesn't exist.\n     */\n    get: function get (object, key, defaultValue) {\n        if (typeof object !== 'object' || object === null) {\n            return defaultValue;\n        }\n\n        if (typeof key !== 'string') {\n            throw new Error('Key must be string.');\n        }\n\n        var keys = key.split('.');\n        var last = keys.pop();\n\n        while (key = keys.shift()) {\n            object = object[key];\n\n            if (typeof object !== 'object' || object === null) {\n                return defaultValue;\n            }\n        }\n\n        return object && object[last] !== undefined ? object[last] : defaultValue;\n    },\n\n    /**\n     * Checks if object contains a child property.\n     * Useful for cases where you need to check if an object contain a nested property.\n     * @param obj\n     * @param prop\n     * @returns {boolean}\n     */\n    has: function has (obj, prop, hasOwnProperty) {\n        if (!_.isString(prop)) {\n            throw new Error('Parameter prop must be type of String');\n        }\n        var parts = prop.split('.');\n\n        if (_.isArray(parts)) {\n            var last = parts.pop();\n            while (prop = parts.shift()) {\n                obj = obj[prop];\n                if (typeof obj !== 'object' || obj === null) {\n                    return false;\n                }\n            }\n            if (hasOwnProperty) {\n                return _.has(obj, last);\n            }\n            return !!(obj && obj[last]);\n        } else {\n            if (hasOwnProperty) {\n                return _.has(obj, prop);\n            }\n            return !!(obj && obj[prop]);\n        }\n    },\n\n\n    /**\n     * Search key in object or array\n     * @param obj or array\n     * @param search predicate function or value\n     * @param context\n     */\n    findKey: function findKey (obj, search, context) {\n        var result,\n            isFunction = _.isFunction(search);\n\n        _.any(obj, function (value, key) {\n            var match = isFunction ? search.call(context, value, key, obj) : (value === search);\n            if (match) {\n                result = key;\n                return true;\n            }\n        });\n        return result;\n    },\n    getIdIfDocument: function getIdIfDocument (docId) {\n        if (_.isObject(docId)) {\n            return docId._id;\n        }\n        return docId;\n    },\n    /**\n     * @deprecated getUniUserObject is deprecated, please use ensureUniUser instead\n     */\n    getUniUserObject: function getUniUserObject (user, withoutLoggedIn) {\n        if (!withoutLoggedIn) {\n            return UniUsers.ensureUniUser(user, Match.Any);\n        }\n        return UniUsers.ensureUniUser(user || null, Match.Any);\n    },\n    /**\n     * Compares documents and returns diff\n     * @param doc1 document will be compared against to document in doc2 parameter.\n     * @param doc2 against to.\n     * @returns {{}}\n     */\n    docDiff: function docDiff (doc1, doc2) {\n        var diff = {};\n        for (var k1 in doc1) {\n            if (!EJSON.equals(doc1[k1], doc2[k1])) {\n                diff[k1] = doc2[k1];\n            }\n        }\n        for (var k2 in doc2) {\n            if (!doc1[k2]) {\n                diff[k2] = doc2[k2];\n            }\n        }\n        return diff;\n    },\n\n    /**\n     * Formatting currency\n     * @param number{number}\n     * @param sections{string}\n     * @param decimals{string}\n     * @returns {string}\n     */\n    formatCurrency: function formatCurrency (number, sections, decimals) {\n        var numberFormatMap = {\n            'a': '\\'',\n            'c': ',',\n            'd': '.',\n            's': ' '\n        };\n\n        decimals = numberFormatMap[decimals] ? numberFormatMap[decimals] : decimals;\n        sections = numberFormatMap[sections] ? numberFormatMap[sections] : sections;\n\n        return number.toFixed(2).replace('.', decimals).replace(/./g, function (digit, index, digits) {\n            if (index && digit !== decimals && ((digits.length - index) % 3 === 0)) {\n                return sections + digit;\n            }\n\n            return digit;\n        });\n    },\n    /**\n     * Gets array of top-level fields, which will be changed by modifier (this from update method)\n     * @param updateModifier modifier from update method\n     * @returns {Array} list of top-level from doc\n     */\n    getFieldsFromUpdateModifier: function getFieldsFromUpdateModifier (updateModifier) {\n        var fields = [];\n        Object.keys(updateModifier).forEach(function (op) {\n            if (ALLOWED_UPDATE_OPERATIONS[op] === 1) {\n                Object.keys(updateModifier[op]).forEach(function (field) {\n                    if (field.indexOf('.') !== -1) {\n                        field = field.substring(0, field.indexOf('.'));\n                    }\n                    if (!_.contains(fields, field)) {\n                        fields.push(field);\n                    }\n                });\n            } else {\n                fields.push(op);\n            }\n        });\n        return fields;\n    },\n    /**\n     * Gets simulation of new version of document passed as a second argument\n     * @param updateModifier modifier from update method\n     * @param oldDoc default empty object\n     * @returns {*}\n     */\n    getPreviewOfDocumentAfterUpdate: function (updateModifier, oldDoc) {\n        oldDoc = oldDoc || {};\n        var id = tmpCollection.insert(oldDoc);\n        tmpCollection.update(id, updateModifier);\n        var newDoc = tmpCollection.findOne(id);\n        if (id !== oldDoc._id) {\n            delete newDoc._id;\n        }\n        tmpCollection.remove(id);\n        return newDoc;\n    },\n    /**\n     * @deprecated please use Object assign instead.\n     */\n    assign: Object.assign.bind(Object)\n};\n\n// piece of code from: meteor/packages/mongo/collection.js\nvar ALLOWED_UPDATE_OPERATIONS = {\n    $inc: 1, $set: 1, $unset: 1, $addToSet: 1, $pop: 1, $pullAll: 1, $pull: 1,\n    $pushAll: 1, $push: 1, $bit: 1\n};\n\nvar tmpCollection = new LocalCollection(null);\n","// PRIVATE PROPERTIES\nconst BYPASS_MODE = '__bypassMode';\nconst IGNORE_CIRCULAR = '__ignoreCircular';\nconst MAX_DEEP = '__maxDeep';\nconst CACHE = '__cache';\nconst QUEUE = '__queue';\nconst STATE = '__state';\nconst {floor} = Math;\nconst {keys} = Object;\n\nconst EMPTY_STATE = {};\n\n\nUniUtils.RecursiveIterator = class RecursiveIterator {\n    /**\n     * @param {Object|Array} root\n     * @param {Number} [bypassMode='vertical']\n     * @param {Boolean} [ignoreCircular=false]\n     * @param {Number} [maxDeep=100]\n     */\n    constructor(root, bypassMode = 'vertical', ignoreCircular = false, maxDeep = 100) {\n        this[BYPASS_MODE] = (bypassMode === 'horizontal' || bypassMode === 1);\n        this[IGNORE_CIRCULAR] = ignoreCircular;\n        this[MAX_DEEP] = maxDeep;\n        this[CACHE] = [];\n        this[QUEUE] = [];\n        this[STATE] = this.getState(undefined, root);\n        this.__makeIterable();\n    }\n    /**\n     * @returns {Object}\n     */\n    next() {\n        var {node, path, deep} = this[STATE] || EMPTY_STATE;\n\n        if (this[MAX_DEEP] > deep) {\n            if (this.isNode(node)) {\n                if (this.isCircular(node)) {\n                    if (this[IGNORE_CIRCULAR]) {\n                        // skip\n                    } else {\n                        throw new Error('Circular reference');\n                    }\n                } else {\n                    if (this.onStepInto(this[STATE])) {\n                        let descriptors = this.getStatesOfChildNodes(node, path, deep);\n                        let method = this[BYPASS_MODE] ? 'push' : 'unshift';\n                        this[QUEUE][method](...descriptors);\n                        this[CACHE].push(node);\n                    }\n                }\n            }\n        }\n\n        var value = this[QUEUE].shift();\n        var done = !value;\n\n        this[STATE] = value;\n\n        if (done) this.destroy();\n\n        return {value, done};\n    }\n    /**\n     *\n     */\n    destroy() {\n        this[QUEUE].length = 0;\n        this[CACHE].length = 0;\n        this[STATE] = null;\n    }\n    /**\n     * @param {*} any\n     * @returns {Boolean}\n     */\n    isNode(any) {\n        return isTrueObject(any);\n    }\n    /**\n     * @param {*} any\n     * @returns {Boolean}\n     */\n    isLeaf(any) {\n        return !this.isNode(any);\n    }\n    /**\n     * @param {*} any\n     * @returns {Boolean}\n     */\n    isCircular(any) {\n        return this[CACHE].indexOf(any) !== -1\n    }\n    /**\n     * Returns states of child nodes\n     * @param {Object} node\n     * @param {Array} path\n     * @param {Number} deep\n     * @returns {Array<Object>}\n     */\n    getStatesOfChildNodes(node, path, deep) {\n        return getKeys(node).map(key =>\n            this.getState(node, node[key], key, path.concat(key), deep + 1)\n        );\n    }\n    /**\n     * Returns state of node. Calls for each node\n     * @param {Object} [parent]\n     * @param {*} [node]\n     * @param {String} [key]\n     * @param {Array} [path]\n     * @param {Number} [deep]\n     * @returns {Object}\n     */\n    getState(parent, node, key, path = [], deep = 0) {\n        return {parent, node, key, path, deep};\n    }\n    /**\n     * Callback\n     * @param {Object} state\n     * @returns {Boolean}\n     */\n    onStepInto(state) {\n        return true;\n    }\n    /**\n     * Only for es6\n     * @private\n     */\n    __makeIterable() {\n        try {\n            this[Symbol.iterator] = () => this;\n        } catch(e) {}\n    }\n};\n\nconst GLOBAL_OBJECT = Meteor.isServer ? global : window;\n\n/**\n * @param {*} any\n * @returns {Boolean}\n */\nfunction isGlobal (any) {\n    return any === GLOBAL_OBJECT;\n}\n\nfunction isTrueObject (any) {\n    return any !== null && typeof any === 'object';\n}\n\n\n/**\n * @param {*} any\n * @returns {Boolean}\n */\nfunction isArrayLike (any) {\n    if (!isTrueObject(any)) return false;\n    if (isGlobal(any)) return false;\n    if(!('length' in any)) return false;\n    var length = any.length;\n    if(length === 0) return true;\n    return (length - 1) in any;\n}\n\n\n/**\n * @param {Object|Array} object\n * @returns {Array<String>}\n */\nfunction getKeys (object) {\n    var keys_ = keys(object);\n    if (Array.isArray(object)) {\n        // skip sort\n    } else if(isArrayLike(object)) {\n        // only integer values\n        keys_ = keys_.filter((key) => floor(Number(key)) == key);\n        // skip sort\n    } else {\n        // sort\n        keys_ = keys_.sort();\n    }\n    return keys_;\n}","/*!\n * @description Recursive object extending\n * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>\n * @license MIT\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2013-2015 Viacheslav Lotsmanov\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nvar isBuffer = typeof Buffer !== 'undefined';\n\nfunction isSpecificValue(val) {\n    return !!(\n        (isBuffer && val instanceof Buffer)\n        || val instanceof Date\n        || val instanceof RegExp\n    );\n}\n\nfunction cloneSpecificValue(val) {\n    if (isBuffer && val instanceof Buffer) {\n        var x = new Buffer(val.length);\n        val.copy(x);\n        return x;\n    } else if (val instanceof Date) {\n        return new Date(val.getTime());\n    } else if (val instanceof RegExp) {\n        return new RegExp(val);\n    } else {\n        throw new Error('Unexpected situation');\n    }\n}\n\n/**\n * Recursive cloning array.\n */\nfunction deepCloneArray(arr) {\n    var clone = [];\n    arr.forEach(function (item, index) {\n        if (typeof item === 'object' && item !== null) {\n            if (Array.isArray(item)) {\n                clone[index] = deepCloneArray(item);\n            } else if (isSpecificValue(item)) {\n                clone[index] = cloneSpecificValue(item);\n            } else {\n                clone[index] = deepExtend({}, item);\n            }\n        } else {\n            clone[index] = item;\n        }\n    });\n    return clone;\n}\n\n/**\n * Extening object that entered in first argument.\n *\n * Returns extended object or false if have no target object or incorrect type.\n *\n * If you wish to clone source object (without modify it), just use empty new\n * object as first argument, like this:\n *   deepExtend({}, yourObj_1, [yourObj_N]);\n */\nfunction deepExtend (/*obj_1, [obj_2], [obj_N]*/) {\n    if (arguments.length < 1 || typeof arguments[0] !== 'object') {\n        return false;\n    }\n\n    if (arguments.length < 2) {\n        return arguments[0];\n    }\n\n    var target = arguments[0];\n\n    // convert arguments to array and cut off target object\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    var val, src, clone;\n\n    args.forEach(function (obj) {\n        // skip argument if it is array or isn't object\n        if (typeof obj !== 'object' || Array.isArray(obj)) {\n            return;\n        }\n\n        Object.keys(obj).forEach(function (key) {\n            src = target[key]; // source value\n            val = obj[key]; // new value\n\n            // recursion prevention\n            if (val === target) {\n                return;\n\n                /**\n                 * if new value isn't object then just overwrite by new value\n                 * instead of extending.\n                 */\n            } else if (typeof val !== 'object' || val === null) {\n                target[key] = val;\n                return;\n\n                // just clone arrays (and recursive clone objects inside)\n            } else if (Array.isArray(val)) {\n                target[key] = deepCloneArray(val);\n                return;\n\n                // custom cloning and overwrite for specific objects\n            } else if (isSpecificValue(val)) {\n                target[key] = cloneSpecificValue(val);\n                return;\n\n                // overwrite by new value if source isn't object or array\n            } else if (typeof src !== 'object' || src === null || Array.isArray(src)) {\n                target[key] = deepExtend({}, val);\n                return;\n\n                // source value and new value is objects both, extending...\n            } else {\n                target[key] = deepExtend(src, val);\n                return;\n            }\n        });\n    });\n\n    return target;\n}\n\nUniUtils.deepExtend = deepExtend;\n","var pSlice = Array.prototype.slice;\nvar objectKeys = Object.keys;\n\nfunction isArguments (object) {\n    return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nvar deepEqual = function (actual, expected, opts) {\n    if (!opts) opts = {};\n    // 7.1. All identical values are equivalent, as determined by ===.\n    if (actual === expected) {\n        return true;\n\n    } else if (actual instanceof Date && expected instanceof Date) {\n        return actual.getTime() === expected.getTime();\n\n        // 7.3. Other pairs that do not both pass typeof value == 'object',\n        // equivalence is determined by ==.\n    } else if (typeof actual != 'object' && typeof expected != 'object') {\n        return opts.strict ? actual === expected : actual == expected;\n\n        // 7.4. For all other Object pairs, including Array objects, equivalence is\n        // determined by having the same number of owned properties (as verified\n        // with Object.prototype.hasOwnProperty.call), the same set of keys\n        // (although not necessarily the same order), equivalent values for every\n        // corresponding key, and an identical 'prototype' property. Note: this\n        // accounts for both named and indexed properties on Arrays.\n    } else {\n        return objEquiv(actual, expected, opts);\n    }\n};\n\nfunction isUndefinedOrNull (value) {\n    return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n    if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n    if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n        return false;\n    }\n    if (x.length > 0 && typeof x[0] !== 'number') return false;\n    return true;\n}\n\nfunction objEquiv (a, b, opts) {\n    var i, key;\n    if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n        return false;\n    // an identical 'prototype' property.\n    if (a.prototype !== b.prototype) return false;\n    //~~~I've managed to break Object.keys through screwy arguments passing.\n    //   Converting to array solves the problem.\n    if (isArguments(a)) {\n        if (!isArguments(b)) {\n            return false;\n        }\n        a = pSlice.call(a);\n        b = pSlice.call(b);\n        return deepEqual(a, b, opts);\n    }\n    if (isBuffer(a)) {\n        if (!isBuffer(b)) {\n            return false;\n        }\n        if (a.length !== b.length) return false;\n        for (i = 0; i < a.length; i++) {\n            if (a[i] !== b[i]) return false;\n        }\n        return true;\n    }\n    try {\n        var ka = objectKeys(a),\n            kb = objectKeys(b);\n    } catch (e) {//happens when one is a string literal and the other isn't\n        return false;\n    }\n    // having the same number of owned properties (keys incorporates\n    // hasOwnProperty)\n    if (ka.length != kb.length)\n        return false;\n    //the same set of keys (although not necessarily the same order),\n    ka.sort();\n    kb.sort();\n    //~~~cheap key test\n    for (i = ka.length - 1; i >= 0; i--) {\n        if (ka[i] != kb[i])\n            return false;\n    }\n    //equivalent values for every corresponding key, and\n    //~~~possibly expensive deep test\n    for (i = ka.length - 1; i >= 0; i--) {\n        key = ka[i];\n        if (!deepEqual(a[key], b[key], opts)) return false;\n    }\n    return typeof a === typeof b;\n}\n\n\nUniUtils.deepEqual = deepEqual;","'use strict';\n\n\n/**\n * Capitalize a string\n * @alias Vazco.capitalize\n * @param {string} string String to capitalize\n * @returns {string}\n */\nUniUtils.capitalize = function (string) {\n    return string.charAt(0).toUpperCase() + string.substring(1).toLowerCase();\n};\n\n\n/**\n * Capitalize a first letter\n * @alias Vazco.capitalizeFirst\n * @param {string} string String to capitalize first letter\n * @returns {string}\n */\nUniUtils.capitalizeFirst = function (string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\n/**\n * Transform string into insensitive Regexp without flag i\n * This can help you with searching in minimongo\n * @param term {String}\n * @returns {RegExp}\n */\nUniUtils.getInSensitiveRegExpForTerm = function(term){\n    check(term, String);\n    term = _.map(term, function (v) {\n        var n = v.toLowerCase();\n        n += v.toUpperCase();\n        return '[' + n + ']';\n    });\n    term = term.join('');\n    return new RegExp(term);\n};\n\n\n/**\n * Generates random string hash\n * @alias Vazco.randomString\n * @param {number} length length of generated hash @default 5\n * @param {number} base @default 36\n * @returns {string}\n */\nUniUtils.randomString = function (length, base) {\n    return (Math.random() + 1).toString(base || 36).substr(2, length || 5);\n};\n\n\n/**\n * camelCase a string\n * @alias Vazco.camelCase\n * @param {string} string String to camelCase\n * @returns {string}\n */\nUniUtils.camelCase = function (string) {\n    return string.toLowerCase().replace(/ (.)/g, function(match, group1) {\n        return group1.toUpperCase();\n    });\n};\n\n\n/**\n * remove international special characters - replaceSpecialChars a string\n * @alias Vazco.replaceSpecialChars\n * @param {string} string String\n * @returns {string}\n */\nUniUtils.replaceSpecialChars =function (string) {\n    var _specialChars = {\n        '√°': 'a',\n        '√Å': 'A',\n        '√©': 'e',\n        '√â': 'E',\n        '√≠': 'i',\n        '√ç': 'I',\n        '√∂': 'o',\n        '√ñ': 'O',\n        '≈ë': 'o',\n        '≈ê': 'O',\n        '√≥': 'o',\n        '√ì': 'O',\n        '√º': 'u',\n        '√ú': 'U',\n        '≈±': 'u',\n        '≈∞': 'U',\n        '√∫': 'u',\n        '√ö': 'U',\n\n        '√†':'a',\n        '√®':'e',\n        '√¨':'i',\n\n        '√≤':'o',\n        '√π':'u',\n        '√Ä':'A',\n        '√à':'E',\n        '√å':'I',\n\n        '√í':'O',\n        '√ô':'U',\n        '√¢':'a',\n        '√™':'e',\n        '√Æ':'i',\n        '√¥':'o',\n        '√ª':'u',\n\n        '√Ç':'A',\n        '√ä':'E',\n        '√é':'I',\n        '√î':'O',\n        '√õ':'U',\n\n        '√£':'a',\n        '√±':'n',\n        '√µ':'o',\n        '√É':'A',\n        '√ë':'N',\n        '√ï':'O',\n\n        '√§':'a',\n        '√´':'e',\n        '√Ø':'i',\n        '√ø':'y',\n\n        '√Ñ':'A',\n        '√ã':'E',\n        '√è':'I',\n        '≈∏':'Y',\n\n        'ƒÖ':'a',\n        'ƒÑ':'A',\n        'ƒô':'e',\n        'ƒò':'E',\n        '≈Ç':'l',\n        '≈Å':'L',\n        '≈õ':'s',\n        '≈ö':'S',\n        '≈Ñ':'n',\n        '≈É':'N',\n        '≈º':'z',\n        '≈ª':'Z',\n        '≈∫':'z',\n        '≈π':'Z',\n\n        '√•':'a',\n        '√Ö':'A',\n        '√ü':'ss'\n    };\n    return string.replace(\n        /[√°√Å√©√â√≠√ç√∂√ñ≈ë≈ê√≥√ì√º√ú≈±≈∞√∫√ö√†√®√¨√≤√π√Ä√à√å√í√ô√¢√™√Æ√¥√ª√Ç√ä√é√î√õ√£√±√µ√É√ë√ï√§√´√Ø√ø√Ñ√ã√è≈∏ƒÖƒÑƒôƒò≈Ç≈Å≈õ≈ö≈Ñ≈É≈º≈ª≈∫≈π√•√Ö]/g,\n        function(c) { return _specialChars[c]; }\n    );\n};","'use strict';\r\n/* global UniConfig: true */\r\nvar _configCollection = new Meteor.Collection('universe_configs');\r\nUniConfig = {\r\n    public:{\r\n        set: function(name, value, isServerWriteOnly){\r\n            var row = {name: name, value:value, access: 'public', lastModified: new Date()};\r\n            if(isServerWriteOnly){\r\n                row.isServerWriteOnly = isServerWriteOnly;\r\n            }\r\n\r\n            if(Meteor.isClient){\r\n                return _set(row);\r\n            }\r\n\r\n            return !!_configCollection.upsert(\r\n                {name: name, access: 'public'},\r\n                row\r\n            );\r\n        },\r\n        get: function(name, defaultValue){\r\n            var obj = _configCollection.findOne({name: name, access: 'public'});\r\n            if(_.isUndefined(obj)) {\r\n                return defaultValue;\r\n            }\r\n            return obj.value;\r\n        },\r\n        getRow: function(name){\r\n           return _configCollection.findOne({name: name, access: 'public'});\r\n        },\r\n        find: function(selector, options) {\r\n            options = options || {};\r\n            selector = _.extend({access: 'public'}, selector||{});\r\n            return _configCollection.find(selector, options);\r\n        }\r\n    },\r\n    users: {\r\n        set: function(name, value, userId){\r\n            if(!userId){\r\n                userId = Meteor.userId();\r\n            }\r\n            userId = UniUtils.getIdIfDocument(userId);\r\n            if(!userId){\r\n                throw Meteor.Error(404, 'Missing userId');\r\n            }\r\n            var row =  {name: name, value:value, access: userId, lastModified: new Date()};\r\n            if(Meteor.isClient) {\r\n                return _set(row);\r\n            }\r\n\r\n            if(_.isUndefined(value)){\r\n                return !!_configCollection.remove({name: name, access: userId});\r\n            }\r\n\r\n            return !!_configCollection.upsert(\r\n                {name: name, access: userId},\r\n                row\r\n            );\r\n        },\r\n        get: function(name, defaultValue, userId){\r\n            if(!userId){\r\n                userId = Meteor.userId();\r\n            }\r\n            userId = UniUtils.getIdIfDocument(userId);\r\n            if(!userId){\r\n                throw Meteor.Error(404, 'Missing userId');\r\n            }\r\n            var obj = _configCollection.findOne({name: name, access: userId});\r\n            if(_.isUndefined(obj)) {\r\n                return defaultValue;\r\n            }\r\n            return obj.value;\r\n        },\r\n        getRow: function(name, userId){\r\n            return _configCollection.findOne({name: name, access: userId});\r\n        },\r\n        find: function(selector, options) {\r\n            options = options || {};\r\n            selector = _.extend({access: 'public'}, selector||{});\r\n            return _configCollection.find(selector, options);\r\n        }\r\n    },\r\n    onReady: function(cb){\r\n        if(!_.isFunction(cb)){\r\n            throw new Meteor.Error(500, 'Function was expected but gets: '+ typeof cb);\r\n        }\r\n        if(Meteor.isServer){\r\n            cb.call(this);\r\n        } else{\r\n            var self = this;\r\n            Tracker.autorun(function(c){\r\n                if(UniConfig.ready()){\r\n                    cb.call(self);\r\n                    c.stop();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nvar _set = function(row){\r\n    UniConfig.onReady(function(){\r\n        var doc = _configCollection.findOne({name: row.name, access: row.access});\r\n        if(doc){\r\n            if(_.isUndefined(row.value)){\r\n                return !!_configCollection.remove({name: row.name, access: row.access});\r\n            }\r\n            _configCollection.update(\r\n                {_id: doc._id},\r\n                {$set: row}\r\n            );\r\n        } else {\r\n            _configCollection.insert(row);\r\n        }\r\n    });\r\n    return true;\r\n};\r\n\r\nif(Meteor.isServer){\r\n    UniConfig.ready = () => true;\r\n    UniConfig.private = {\r\n        set (name, value) {\r\n            if (_.isUndefined(value)) {\r\n                return !!_configCollection.remove({name: name, access: 'private'});\r\n            }\r\n            return !!_configCollection.upsert(\r\n                {name: name, access: 'private'},\r\n                {name: name, value: value, access: 'private', lastModified: new Date()}\r\n            );\r\n        },\r\n        get (name, defaultValue) {\r\n            var obj = _configCollection.findOne({name: name, access: 'private'});\r\n            if (_.isUndefined(obj)) {\r\n                return defaultValue;\r\n            }\r\n            return obj.value;\r\n        },\r\n        getRow (name) {\r\n            return _configCollection.findOne({name: name, access: 'private'});\r\n        },\r\n        find (selector, options) {\r\n            options = options || {};\r\n            selector = _.extend({access: 'public'}, selector||{});\r\n            return _configCollection.find(selector, options);\r\n        },\r\n        runOnce (name, callback, isAsync) {\r\n            if (!UniConfig.private.get('runOne_' + name)) {\r\n                var result, asyncWay = err => {\r\n                    if (err) {\r\n                        UniConfig.private.set('runOne_' + name);\r\n                    } else {\r\n                        UniConfig.private.set('runOne_' + name, new Date());\r\n                    }\r\n                    isAsync = true;\r\n                    console.log('Running once:', name, 'status: '+(err?'FAILED':'OK'), '(from async callback)');\r\n                };\r\n                try {\r\n                    result = callback(asyncWay);\r\n                    if (result && typeof result.then === 'function') {\r\n                        isAsync = true;\r\n                        result.then(\r\n                            () => {\r\n                                UniConfig.private.set('runOne_' + name, new Date());\r\n                                console.log('Running once:', name, 'status: OK', '(from promise)');\r\n                            },\r\n                            () => {\r\n                                isAsync = true;\r\n                                UniConfig.private.set('runOne_' + name);\r\n                                console.log('Running once:', name, 'status: FAILED', '(from promise)');\r\n                            }\r\n                        );\r\n                    }\r\n                } catch (e) {\r\n                    console.error(e);\r\n                    result = false;\r\n                }\r\n                if (isAsync) {\r\n                    return;\r\n                }\r\n                if (result !== false) {\r\n                    UniConfig.private.set('runOne_' + name, new Date());\r\n                }\r\n                console.log('Running once:', name, 'status: '+((result !== false)?'OK':'FAILED'));\r\n            }\r\n        }\r\n    };\r\n    // short access\r\n    UniConfig.runOnce = UniConfig.private.runOnce;\r\n\r\n    Meteor.publish('UniConfig', function () {\r\n        var query = {access: 'public'};\r\n        if(_.isString(this.userId) && this.userId !== 'private'){\r\n            query = {$or:[query, {access: this.userId}]};\r\n        }\r\n        return _configCollection.find(query);\r\n    });\r\n\r\n    _configCollection._ensureIndex({name:1, access:1}, {unique: 1});\r\n    UniConfig.public._accessValidators = [];\r\n    UniConfig.public.onAccessValidation = function onAccessValidation (accessValidator) {\r\n        if (accessValidator !== 'function') {\r\n            throw new Error('Access Validator must be a function');\r\n        }\r\n        UniConfig.public._accessValidators.push(accessValidator);\r\n    };\r\n\r\n    var _checkRights = function(userId, doc){\r\n        if(doc.isServerWriteOnly){\r\n            return false;\r\n        }\r\n        switch(doc.access){\r\n            case 'public':\r\n                //For non universe environment we grant access for all\r\n                var result = true;\r\n                if (typeof UniUsers !== 'undefined'){\r\n                    result = UniUsers.isAdminLoggedIn();\r\n                }\r\n\r\n                if (UniConfig.public._accessValidators.length){\r\n                    result = UniConfig.public._accessValidators.every(function(fn){\r\n                        var res = fn(userId, doc, result);\r\n                        return res || res === undefined;\r\n                    });\r\n                }\r\n\r\n            return result;\r\n            case 'private':\r\n                return false;\r\n        }\r\n        return doc.access === userId;\r\n    };\r\n\r\n    _configCollection.allow({\r\n        insert: _checkRights,\r\n        update: _checkRights,\r\n        remove: _checkRights\r\n    });\r\n\r\n} else{\r\n    var _handleSub = Meteor.subscribe('UniConfig');\r\n    UniConfig.ready = _handleSub.ready;\r\n}\r\n","UniUtils.Emitter = function UniEmitter() {\n    this._listeners = {};\n};\n\nUniUtils.Emitter.prototype.emit = function emit(eventType) {\n    if (!Array.isArray(this._listeners[eventType])) {\n        return this;\n    }\n    var args = Array.prototype.slice.call(arguments, 1);\n    this._listeners[eventType].forEach(function _emit(listener) {\n        listener.apply(this, args);\n    }, this);\n\n    return this;\n};\n\nUniUtils.Emitter.prototype.on = function on(eventType, listener) {\n    if (!Array.isArray(this._listeners[eventType])) {\n        this._listeners[eventType] = [];\n    }\n\n    if (this._listeners[eventType].indexOf(listener) === -1) {\n        this._listeners[eventType].push(listener);\n    }\n\n    return this;\n};\n\nUniUtils.Emitter.prototype.once = function once(eventType, listener) {\n    var self = this;\n    function _once() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        self.off(eventType, _once);\n        listener.apply(self, args);\n    }\n    _once.listener = listener;\n    return this.on(eventType, _once);\n};\n\nUniUtils.Emitter.prototype.off = function off(eventType, listener) {\n    if (!Array.isArray(this._listeners[eventType])) {\n        return this;\n    }\n    if (typeof listener === 'undefined') {\n        this._listeners[eventType] = [];\n        return this;\n    }\n    var index = this._listeners[eventType].indexOf(listener);\n    if (index === -1) {\n        for (var i = 0; i < this._listeners[eventType].length; i += 1) {\n            if (this._listeners[eventType][i].listener === listener) {\n                index = i;\n                break;\n            }\n        }\n    }\n    this._listeners[eventType].splice(index, 1);\n    return this;\n};\n\n"]}